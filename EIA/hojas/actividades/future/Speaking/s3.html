<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8"/>
	<head>
		<title>English In Action - Speaking</title>
		<script type="application/javascript" src="../../../js/jquery.min.js"></script>
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script type="application/javascript" src="../../acciones.js"></script>
		<link rel="stylesheet" href="../../tipo.css"/>
		<link rel="stylesheet" href="../../present/Speaking/css/act1.css"/>
		<link rel="stylesheet" href="../../present/Speaking/css/responsive.css">
		<link rel="stylesheet" href="../../present/Speaking/css/responsiveslides.css" />
		
		
		<script type="text/javascript" src="js/roundabout.js"></script>
		<script type="text/javascript" src="js/gallery_init.js"></script>
		
		<script src="js/responsiveslides.js"></script>
		<link rel="stylesheet" href="../../responsiveenglish.css"/>
		<script type="text/javascript">
			 function closebuscador(){
            $("#buscador").hide("slow");
            $(".modal-window").css('left','45%');
            $(".modal-window").css('top','45%');
            $(".modal-window").css('right','45%');
            $(".modal-window").css('bottom','45%');
          
          }
      $(document).ready(function(){
         
              $("#buscador").hide();   
      $("#bucadorito").click(function(){
    $("#buscador").show("slow");
    }); 
    document.oncontextmenu = function() {
      return false
    }
			$("#menuForAll" ).slideToggle(0);
			$("#clickOnMe").click(function(){
			$("#menuForAll" ).slideToggle(1000);
			});			
			});

			function c(id){
				seleccionado=id;
			}
		</script>

	</head>

<body onLoad="readme(23000),cerrar()">
<div title="Click para Cerrar" id="loadMe"><h1>LOADING...</h1></div>
	<div id="buscador">
  <iframe scrolling='no' id="buscadorsino" src="../../../cosino/" name="buscadorsino" height="100%" width="100%" frameborder="0"  ></iframe>  
  </div>
	



	<section id="activities">
		<nav id="menuForAll">
			<div id="logoMenu">
				<a href="../../../../index.html"><img src="../../../imagenes/ingles.png"></a>
			</div>
			
			<ul>
				<a href="../../../menu/selection/selection.html"><li>Main Menu</li></a>
				<a href="../../../cont/cont.html"><li>Context Information</li></a>
				<a href="../../../mmenu/sitemap.html"><li>Site Map</li></a>
				<a href="../../../biblioteca/biblioteca.html"><li>Library</li></a>
				<li><a  id="bucadorito" href="#Vocabulary">Vocabulary</a></li>
                <a href="../../../references/refe.html"><li>References</li></a>
				<a href="../../../credits/staff.html"><li>Staff</li></a>
			</ul> 
		</nav>
		<header>
			<div id="logo"><img  src="../../../imagenes/ingles.png" width="80px" height="80px"/></div>
			<div id="title"><img src="../../../imagenes/avisos/tonys.png"/></div>
			<div id="udec"> <img src="../../../imagenes/logoudec.png"/></div>
		</header>
		
		<div id="informa">
					<section id="manito">
							<img id="hand2" class="hand" src="../../../imagenes/avisos/hand.png"/>
							<img id="hand1" class="hand" src="../../../imagenes/avisos/hand.png"/>
					</section>
					
					<section id="info">
								<img class="alumbraobj" id="alumbraobj" style="cursor: pointer"onmouseout="changehand(3)" onmouseover="changehand(1)" onClick="insob()" src="../../../imagenes/botones/objetivo.png"/>
								<img class="alumbrains" id="alumbrains" style="cursor: pointer" onmouseout="changehand(2)" onmouseover="changehand(0)" onClick="ins()" src="../../../imagenes/botones/instruccion.png"/>
					</section>
					
					<section id="txt">
						<div id="objetivos"><h5>To encourage the oral ability by means of communication.</h5></div>
						<div id="instruccion">	<h5>Look at the pictures and say what is going to happen. Use the vocabulary given and the expressions "will" or "going to" in order to make your predictions. Press "NEXT" to continue
												</h5>
						</div>
						
					</section>
			
		</div>
		
		<div id="georgeRules"></div>
		
		
		<article id="r1">
			<section id="blanco">

			
			<div class="container">
			<h2 id="noeta"></h2>
			<ul id="myRoundabout">        
				<li><img id="Baby" class="faster" onload="c(id)" onclick="c(id)" src="../../images/speaking/64_imagen.png"></li>
				<li><img id="Mexico" onclick="c(id)" src="../../images/speaking/67_imagen.png"></li>
				<li><img id="Salad" onclick="c(id)" src="../../images/speaking/66_imagen.png"></li>
				<li><img id="Tomorrow" onclick="c(id)" src="../../images/speaking/65_imagen.png"></li>
				<li><img id="Robots" onclick="c(id)" src="../../images/speaking/68__imagen.png"></li>
				
						
				
			</ul>
    
				
				<div id="information">
					<p id="info_start">Click on the microphone icon and begin speaking.</p>
					<p id="info_speak_now">Speak now.</p>
					<p id="info_no_speech">No speech was detected. You may need to adjust your<a href="http://support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892">microphone settings</a>.</p>
					<p id="info_no_microphone" style="display:none">No microphone was found. Ensure that a microphone is installed and that<a href="http://support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892">microphone settings</a> are configured correctly.</p>
					<p id="info_allow">Click the "Allow" button above to enable your microphone.</p>
					<p id="info_denied">Permission to use microphone was denied.</p>
					<p id="info_blocked">Permission to use microphone is blocked. To change,go to <a href="chrome://settings/contentExceptions#media-stream">chrome://settings/contentExceptions#media-stream</a></p>
					<p id="info_upgrade">Web Speech API is not supported by this browser.Upgrade to <a href="http://www.google.com/chrome">Chrome</a>version 25 or later.</p>
				</div>
		
		
				
				<div class="right">
					<button id="start_button" onclick="startButton(event)">
						<img id="start_img" src="../../../imagenes/botones/mic12.png" alt="Start"/>
					</button>
				</div>	
		
				</div>
	
	
				<div id="results">
					<span id="final_span" class="final"></span>
					<span id="interim_span" class="interim"></span>
					<p>
				</div>
				
				
				<div class="center">
						<div id="div_language">
							<select id="select_language"></select>
							&nbsp;&nbsp;
							<select id="select_dialect"></select>
						</div>
				</div>


			
			</section>
		</article>
		<div id="review">
			<label for="cuatro">		FINAL SCORE	</label><br>
				<span>
				<img  id="right" src="../../../imagenes/right.png" />
				</span>
				<span>
				<img  id="wrong" src="../../../imagenes/wrong.png" />
			</span>
			<h5><p id="result"> </p></h5>
		</div>
			
		<audio controls preload="none" id="instruyeme">
		<source src="../../audios/instrucciones/speaking/instruccion_afs3.mp3" type="audio/mpeg" />"
		
	</audio>

			
					<audio controls preload="none" id="retrowell">
						<source src="../../audios/feedback/congratulation.mp3" type="audio/mpeg" />
							<p>Tu navegador no implementa el elemento audio.</p>
					</audio>
					<audio controls preload="none" id="retrobad">
						<source src="../../audios/feedback/can%20do%20b.mp3" type="audio/mpeg" />
							<p>Tu navegador no implementa el elemento audio.</p>
					</audio>
					
					<audio controls preload="none" id="bien">
						<source src="../../audios/feedback/well done.mp3" type="audio/mpeg" />
					</audio>
					<audio controls preload="none" id="mal0">
						<source src="../../audios/feedback/try%20again.mp3" type="audio/mpeg" />
					</audio>
					<audio controls preload="none" id="thecorrect">
						<source src="../../audios/feedback/the%20correct.mp3" type="audio/mpeg" />
					</audio>
			
				
					<audio controls preload="none" id="rta1">
						<source src="../../audios/respuestas/speaking/afs3_1.mp3" type="audio/mpeg" />
					</audio>
					<audio controls preload="none" id="rta2">
						<source src="../../audios/respuestas/speaking/afs3_2.mp3" type="audio/mpeg" />
					</audio>
					<audio controls preload="none" id="rta3">
						<source src="../../audios/respuestas/speaking/afs3_3.mp3" type="audio/mpeg" />
					</audio>
					<audio controls preload="none" id="rta4">
						<source src="../../audios/respuestas/speaking/afs3_4.mp3" type="audio/mpeg" />
					</audio>
					<audio controls preload="none" id="rta5">
						<source src="../../audios/respuestas/speaking/afs3_5.mp3" type="audio/mpeg" />
					</audio>
					
			<footer>
			
			<nav id="navegacion">
				
				<nav id="continuar" class="sig"onClick="resul()" style="cursor: pointer"><img src="../../../imagenes/botones/nex.png"/></nav>
				<nav class="prev" style="cursor: pointer" onClick="volver(0)"><img src="../../../imagenes/botones/prev.png"/></nav>
				<nav class="final"><a href="s4.html" ><img src="../../../imagenes/botones/continue.png"/></a></nav>
			</nav>
			
			
			<span id="references">Making plans and Predictions: Speaking - Activity 3
				<nav id="clickOnMe" class="nav-esquina" role="navigation">
						<i class="fa fa-th fa-2x"></i>
					</nav>
			</span>
			
			</footer>
	</section>
	
</body>
	
<script>
var seleccionado="";
var langs =
[['Afrikaans',       ['af-ZA']],
 ['Bahasa Indonesia',['id-ID']],
 ['Bahasa Melayu',   ['ms-MY']],
 ['Català',          ['ca-ES']],
 ['Čeština',         ['cs-CZ']],
 ['Deutsch',         ['de-DE']],
 ['English',         ['en-AU', 'Australia'],
                     ['en-CA', 'Canada'],
                     ['en-IN', 'India'],
                     ['en-NZ', 'New Zealand'],
                     ['en-ZA', 'South Africa'],
                     ['en-GB', 'United Kingdom'],
                     ['en-US', 'United States']],
 ['Español',         ['es-AR', 'Argentina'],
                     ['es-BO', 'Bolivia'],
                     ['es-CL', 'Chile'],
                     ['es-CO', 'Colombia'],
                     ['es-CR', 'Costa Rica'],
                     ['es-EC', 'Ecuador'],
                     ['es-SV', 'El Salvador'],
                     ['es-ES', 'España'],
                     ['es-US', 'Estados Unidos'],
                     ['es-GT', 'Guatemala'],
                     ['es-HN', 'Honduras'],
                     ['es-MX', 'México'],
                     ['es-NI', 'Nicaragua'],
                     ['es-PA', 'Panamá'],
                     ['es-PY', 'Paraguay'],
                     ['es-PE', 'Perú'],
                     ['es-PR', 'Puerto Rico'],
                     ['es-DO', 'República Dominicana'],
                     ['es-UY', 'Uruguay'],
                     ['es-VE', 'Venezuela']],
 ['Euskara',         ['eu-ES']],
 ['Français',        ['fr-FR']],
 ['Galego',          ['gl-ES']],
 ['Hrvatski',        ['hr_HR']],
 ['IsiZulu',         ['zu-ZA']],
 ['Íslenska',        ['is-IS']],
 ['Italiano',        ['it-IT', 'Italia'],
                     ['it-CH', 'Svizzera']],
 ['Magyar',          ['hu-HU']],
 ['Nederlands',      ['nl-NL']],
 ['Norsk bokmål',    ['nb-NO']],
 ['Polski',          ['pl-PL']],
 ['Português',       ['pt-BR', 'Brasil'],
                     ['pt-PT', 'Portugal']],
 ['Română',          ['ro-RO']],
 ['Slovenčina',      ['sk-SK']],
 ['Suomi',           ['fi-FI']],
 ['Svenska',         ['sv-SE']],
 ['Türkçe',          ['tr-TR']],
 ['български',       ['bg-BG']],
 ['Pусский',         ['ru-RU']],
 ['Српски',          ['sr-RS']],
 ['한국어',            ['ko-KR']],
 ['中文',             ['cmn-Hans-CN', '普通话 (中国大陆)'],
                     ['cmn-Hans-HK', '普通话 (香港)'],
                     ['cmn-Hant-TW', '中文 (台灣)'],
                     ['yue-Hant-HK', '粵語 (香港)']],
 ['日本語',           ['ja-JP']],
 ['Lingua latīna',   ['la']]];
for (var i = 0; i < langs.length; i++) {
  select_language.options[i] = new Option(langs[i][0], i);
}
select_language.selectedIndex = 6;
updateCountry();
select_dialect.selectedIndex = 6;
showInfo('info_start');
function updateCountry() {
  for (var i = select_dialect.options.length - 1; i >= 0; i--) {
    select_dialect.remove(i);
  }
  var list = langs[select_language.selectedIndex];
  for (var i = 1; i < list.length; i++) {
    select_dialect.options.add(new Option(list[i][1], list[i][0]));
  }
  select_dialect.style.visibility = list[1].length == 1 ? 'hidden' : 'visible';
}

	var final_transcript = '';
	var recognizing = false;
	var ignore_onend;
	var start_timestamp;
	var recept='';
	var cuentabien=0;
	var bien=[0,0,0,0,0,0,0],
        auto;
	var malisimo1=malisimo2=malisimo3=malisimo4=malisimo5=0;
	if (!('webkitSpeechRecognition' in window)) {
		upgrade();
		} 
		else {
			start_button.style.display = 'inline-block';
			var recognition = new webkitSpeechRecognition();
			recognition.continuous = true;
			recognition.interimResults = true;

			recognition.onstart = function() {
			recognizing = true;
			showInfo('info_speak_now');
			$('.right').css('-webkit-animation','inicia 1.5 infinite');
			start_img.src = '../../../imagenes/botones/mic11.png'; 
			};

recognition.onerror = function(event) {
    if (event.error == 'no-speech') {
		start_img.src = '../../../imagenes/botones/micTrouble.png';
		showInfo('info_no_speech');
		ignore_onend = true;
		}
    if (event.error == 'audio-capture') {
		start_img.src = '../../../imagenes/botones/micTrouble.png';
		showInfo('info_no_microphone');
		ignore_onend = true;
		}
    if (event.error == 'not-allowed') {
		if (event.timeStamp - start_timestamp < 100) {
			showInfo('info_blocked');
			} 
			else {
				showInfo('info_denied');
				}
		ignore_onend = true;
    }
};

recognition.onend = function() {
    recognizing = false;
    if (ignore_onend) {
      return;
    }
    start_img.src = '../../../imagenes/botones/mic12.png';
    if (!final_transcript) {
      showInfo('info_start');
      return;
    }


	
    showInfo('');
    if (window.getSelection) {
      window.getSelection().removeAllRanges();
      var range = document.createRange();
      range.selectNode(document.getElementById('final_span'));
      window.getSelection().addRange(range);
    }
	

	
	recept=recept.toLowerCase();
	alert("You said: "+recept+" seleccion:"+seleccionado);
	
	if(seleccionado=="Baby"&&bien[0]==0)
		{
			if(recept=="she is going to have a baby"||recept=="she is gonna to have a baby"){
				bien[0]=1;
				document.getElementById('bien').play();
				$(".faster").css('opacity','0.2');
				cuentabien++;
			}
			else
				if(malisimo1<1){
				document.getElementById('mal0').play();
				malisimo1++;
				
				}else
				{	
					document.getElementById('rta1').play();
					$("#faster").css('opacity','0.2');
					bien[0]=1;
				}
		}
	else	
	if(seleccionado=="Mexico"&&bien[1]==0)
		{if(recept=="they are going to travel to mexico"||"they are gonna travel to mexico")
			{bien[1]=1;
			document.getElementById('bien').play();
			$("#Mexico").css('opacity','0.2');
			cuentabien++;}
			else
			if(malisimo2<1){
				document.getElementById('mal0').play();
				malisimo2++;
				
				}else
				{	
					document.getElementById('rta2').play();
					$("#Mexico").css('opacity','0.2');
					bien[1]=1;
				}
			
			}
			
			
			
		else		
	if(seleccionado=="Salad"&&bien[2]==0)
		{if(recept=="he is going to eat a salad"||"He is gonna eat a salad")
			{bien[2]=1;
			document.getElementById('bien').play();
			$("#Salad").css('opacity','0.2');
			cuentabien++;
			}
			else
				if(malisimo3<1){
				document.getElementById('mal0').play();
				malisimo3++;
				
				}else
				{	
					document.getElementById('rta3').play();
					$("#Salad").css('opacity','0.2');
					bien[2]=1;
				}
				
		}
			
			
			else
			
	if(seleccionado=="Tomorrow"&&bien[3]==0)
		{if(recept=="it will rain tomorrow")
			{bien[3]=1;
			$("#Tomorrow").css('opacity','0.2');
			document.getElementById('bien').play();
			cuentabien++;
		}
		else
				if(malisimo4<1){
				document.getElementById('mal0').play();
				malisimo4++;
				
				}else
				{	
					document.getElementById('rta4').play();
					$("#Tomorrow").css('opacity','0.2');
					bien[3]=1;
				}
		}
		else
	if(seleccionado=="Robots")
		{if(recept=="Robots will replace teachers")
			{
			bien[4]=1;
			document.getElementById('bien').play();
			$("#Robots").css('opacity','0.2');
			cuentabien++;
			}
			else
				if(malisimo5<1){
				document.getElementById('mal0').play();
				malisimo5++;
				
				}else
				{	
					document.getElementById('rta5').play();
					$("#Robots").css('opacity','0.2');
					bien[4]=1;
				}
		}		
			
		
	
	if(bien[0]==1&&bien[1]==1&&bien[2]==1&&bien[3]==1&&bien[4]==1){
				temp=setTimeout(function (){resul();},4000);
			}
	showInfo('info_start');

  };
 
  recognition.onresult = function(event) {
    var interim_transcript = '';

  for (var i = event.resultIndex; i < event.results.length; ++i) {
      if (event.results[i].isFinal) {
        final_transcript += event.results[i][0].transcript;
      } else {
        interim_transcript += event.results[i][0].transcript;
      }
    }
    
	final_transcript = capitalize(final_transcript);
	recept=final_transcript;
	
    final_span.innerHTML = linebreak(final_transcript);
    interim_span.innerHTML = linebreak(interim_transcript);
    if (final_transcript || interim_transcript) {
      showButtons('inline-block');
    }
	
  };
}

function upgrade() {
  start_button.style.visibility = 'hidden';
  showInfo('info_upgrade');
}

var two_line = /\n\n/g;
var one_line = /\n/g;

function linebreak(s) {
  return s.replace(two_line, '<p></p>').replace(one_line, '<br>');
}

var first_char = /\S/;

function capitalize(s) {
  return s.replace(first_char, function(m) { return m.toUpperCase(); });
}

function copyButton() {
  if (recognizing) {
    recognizing = false;
    recognition.stop();
  }
  copy_button.style.display = 'none';
  copy_info.style.display = 'inline-block';
  showInfo('');
}

function startButton(event) {
  if (recognizing) {
    recognition.stop();
    return;
  }
  final_transcript = '';
  recognition.lang = select_dialect.value;
  recognition.start();
  ignore_onend = false;
  final_span.innerHTML = 'here the text';
  interim_span.innerHTML = '';
  start_img.src = '../../../imagenes/botones/mic12.png';
  showInfo('info_allow');
  showButtons('none');
  start_timestamp = event.timeStamp;
  
  auto=setTimeout(function(){ recognition.stop(); },8000);
  }


function showInfo(s) {
  if (s) {
    for (var child = information.firstChild; child; child = child.nextSibling) {
      if (child.style) {
        child.style.display = child.id == s ? 'inline' : 'none';
      }
    }
    information.style.visibility = 'visible';
  } else {
    information.style.visibility = 'hidden';
  }
}

var current_style;



function showButtons(style) {
  if (style == current_style) {
    return;
  }
  current_style = style;

}

function c(id){
	seleccionado=id;
	id=id.replace(/_/g," ");
	
	if(id=="Baby")
		id="She / have a baby";
	if(id=="Mexico")
		id="They / travel to Mexico";
	
	if(id=="Salad")
		id="He / eat a salad";
	
	if(id=="Tomorrow")
		id="It / rain tomorrow";
	
	if(id=="Robots")
		id="Robots / replace teachers";
	
	
	document.getElementById('noeta').innerHTML=""+id;	
	}

	var j,m=3,s=0;
	
	
	function resul(){
	$('#r1').css('display','none');
$('.sig').css('display','none');
clearTimeout(auto);
document.getElementById('instruyeme').pause();


resultado(cuentabien,4);

	}
	
	
	function carga(){
$('#information').css('display','none');
$('#mic').css('display','none');
empezar();}

function empezar(){
	
	$('#gallery').css('opacity','1');
		
		
			auto=setTimeout(function(){
				
				
				document.getElementById('Baby').click(); 
				
				document.getElementById('noeta').innerHTML="She is going to have a baby";
				

				document.getElementById('rta1').play();
				},0500);
			
			auto=setTimeout(function(){
				
				document.getElementById('Mexico').click();
		
				document.getElementById('noeta').innerHTML="They are going to travel to Mexico";
				
				
				
				
				document.getElementById('rta2').play();
				
				},3000);
			
				
				
			auto=setTimeout(function(){
				
				document.getElementById("Salad").click();
	
				document.getElementById('noeta').innerHTML="He is going to eat a salad";
				document.getElementById('rta3').play();
				},6000);
			

			auto=setTimeout(function(){
				
				
				
				document.getElementById('Tomorrow').click(); 
			
				document.getElementById('noeta').innerHTML="It will rain tomorrow";
				
			
			
			
			
			
				document.getElementById('rta4').play();
				},9000);
			
			auto=setTimeout(function(){
				
				document.getElementById('Robots').click();
							
				
				document.getElementById('noeta').innerHTML="Robots will replace teachers";
				
					
					
				
				document.getElementById('rta5').play();
				},12000);
			
		

			auto=setTimeout(function(){
			document.getElementById('noeta').innerHTML="She/ have a Baby";
			document.getElementById('Baby').click();
			$('#information').css('display','inline-block');
$('#mic').css('display','inline-block');
$('.right').css('display','inline-block');
$('#reloj figure').css('position','relative');
$('#reloj figure').css('top','-45px');



			},15370);
			
			

		


}

</script>
</html>